{"version":3,"file":"react-var-ui.cjs.production.min.js","sources":["../src/common/VarUIContext.ts","../src/VarBase.tsx","../src/VarAngle.tsx","../src/common/roundValue.ts","../src/icons/IconDown.tsx","../src/icons/IconUp.tsx","../src/VarXY.tsx","../src/icons/IconImageSelect.tsx","../src/icons/IconDelete.tsx","../src/icons/IconAdd.tsx","../src/VarAdd.tsx","../src/VarButton.tsx","../src/VarCategory.tsx","../src/VarColor.tsx","../src/VarDisplay.tsx","../src/VarGroup.tsx","../src/VarGroupItem.tsx","../src/VarImage.tsx","../src/VarNumber.tsx","../src/VarSelect.tsx","../src/VarSlider.tsx","../src/VarString.tsx","../src/VarToggle.tsx","../src/VarUI.tsx","../src/VarVector2.tsx","../src/VarVector3.tsx"],"sourcesContent":["import { createContext, useContext, useMemo, useCallback } from 'react';\n\nexport type VarUIObject = any;\n\nexport interface IVarUIContext {\n  values: VarUIObject;\n  getValue: (path?: string) => any;\n  setValue: (path: string, value: any) => void;\n}\n\nexport const VarUIContext = createContext<IVarUIContext | undefined>(undefined);\n\n/**\n * Simple function used for custom input components.\n * @param path\n * @param fallbackValue\n * @param onChange\n * @returns [value: T, setValue: (value: T) => void]\n */\nexport function useVarUIValue<T>(\n  path?: string,\n  fallbackValue?: T,\n  onChange?: (path: string | undefined, value: T) => void\n): [T, (value: T) => void] {\n  const context = useContext(VarUIContext);\n  const value = useMemo(() => context?.getValue(path) ?? fallbackValue, [\n    context,\n    path,\n    fallbackValue\n  ]);\n  const setValue = useCallback(\n    (value: T) => {\n      if (path && context) {\n        context.setValue(path, value);\n      }\n      onChange?.(path, value);\n    },\n    [path, context, onChange]\n  );\n\n  return [value, setValue];\n}\n","import React, { FC, ReactChild, ReactNode } from 'react';\n\nexport interface IVarBaseProps {\n  /**\n   * Label to be shown left to the input.\n   */\n  label?: ReactChild;\n\n  /**\n   * Additional class names on the wrapping div element.\n   */\n  className?: string;\n\n  /**\n   * Should the component be disabled.\n   */\n  disabled?: boolean;\n\n  /**\n   * Children. Only rendered when provided directly to the VarBase component.\n   */\n  children?: ReactNode;\n}\n\nexport interface IVarBaseInputProps<T> extends IVarBaseProps {\n  /**\n   * Variable path in the data object.\n   */\n  path?: string;\n\n  /**\n   * Current value (only used if context and path aren't available).\n   * In most cases you aren't going to need this.\n   */\n  value?: T;\n\n  /**\n   * Default value for components that support resetting (on double click for example).\n   */\n  defaultValue?: T;\n\n  /**\n   * On change event, called with the new value if provided.\n   * In most cases you aren't going to need this.\n   */\n  onChange?: (path: string | undefined, value: T) => void;\n}\n\n/**\n * Base VarUI input component. Doesn't do anything besides displaying the label.\n * Used to construct other components from.\n */\nexport const VarBase: FC<IVarBaseProps> = ({\n  label,\n  children,\n  className,\n  disabled,\n}) => {\n  return (\n    <div\n      className={\n        'react-var-ui-label ' +\n        (label\n          ? 'react-var-ui-label-has-label '\n          : 'react-var-ui-label-no-label ') +\n        (disabled ? 'react-var-ui-disabled ' : '') +\n        (className ? className : '')\n      }\n    >\n      {!!label && <span>{label}</span>}\n      {children}\n    </div>\n  );\n};\n","import React, { FC, useCallback, useEffect, useMemo, useRef } from 'react';\nimport { usePointerDragSimple } from 'react-use-pointer-drag';\n\nimport { useVarUIValue } from './common/VarUIContext';\nimport { IVarBaseInputProps, VarBase } from './VarBase';\n\nconst PI2 = Math.PI * 2;\n\nfunction wrap(angle: number) {\n  return (PI2 + (angle % PI2)) % PI2;\n}\n\nexport interface IVarAngleProps extends IVarBaseInputProps<number> {}\n\n/**\n * Angle picker component. Accepts and provides numbers (radians).\n */\nexport const VarAngle: FC<IVarAngleProps> = ({\n  label,\n  path,\n  value,\n  onChange,\n  disabled,\n  defaultValue = 0,\n  className,\n}) => {\n  const controlRef = useRef<HTMLDivElement>(null);\n  const [currentValue, setCurrentValue] = useVarUIValue(path, value, onChange);\n  const degrees = useMemo(\n    () => Math.round(wrap(currentValue) * (180 / Math.PI)),\n    [currentValue]\n  );\n\n  const updatePosition = useCallback(\n    (x: number, y: number) => {\n      if (!controlRef.current) {\n        return;\n      }\n\n      const div = controlRef.current;\n      const rect = div.getBoundingClientRect();\n      const centerX = rect.left + rect.width / 2;\n      const centerY = rect.top + rect.height / 2;\n      setCurrentValue(wrap(Math.atan2(y - centerY, x - centerX) + Math.PI / 2));\n    },\n    [setCurrentValue]\n  );\n\n  const { events } = usePointerDragSimple(updatePosition);\n\n  useEffect(() => {\n    controlRef.current?.addEventListener('wheel', e => e.preventDefault());\n  }, []);\n\n  return (\n    <VarBase label={label} disabled={disabled} className={className}>\n      <span className=\"react-var-ui-angle-value\">{degrees}&deg;</span>\n      <div className=\"react-var-ui-angle\">\n        <div\n          className=\"react-var-ui-angle-control\"\n          ref={controlRef}\n          style={{ transform: `rotate(${degrees}deg)` }}\n          onDoubleClick={() =>\n            typeof defaultValue !== 'undefined' && setCurrentValue(defaultValue)\n          }\n          onWheel={e => {\n            setCurrentValue(wrap(currentValue + 0.5 * (e.deltaY < 0 ? -1 : 1)));\n          }}\n          title=\"Angle\"\n          {...events}\n        ></div>\n      </div>\n    </VarBase>\n  );\n};\n","export function roundValue(\n  value: number,\n  min?: number,\n  max?: number,\n  step?: number,\n  integer?: boolean\n): number {\n  if (!isFinite(value)) {\n    value = min ?? 0;\n  }\n\n  let decimalPlaces = 2;\n  if (typeof step === 'number') {\n    decimalPlaces = step.toString().split('.')[1]?.length || 0;\n\n    if (decimalPlaces > 20) {\n      // JavaScript limitation\n      decimalPlaces = 20;\n    }\n\n    value = Math.round(value / step) * step;\n  }\n\n  if (typeof min === 'number') {\n    value = Math.max(min, value);\n  }\n\n  if (typeof max === 'number') {\n    value = Math.min(max, value);\n  }\n\n  return integer ? Math.round(value) : parseFloat(value.toFixed(decimalPlaces));\n}\n","import React, { FC } from 'react';\n\nexport const IconDown: FC = () => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"16\"\n      height=\"16\"\n      fill=\"currentColor\"\n      viewBox=\"0 0 16 16\"\n    >\n      <path\n        fillRule=\"evenodd\"\n        d=\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z\"\n      />\n    </svg>\n  );\n};\n","import React, { FC } from 'react';\n\nexport const IconUp: FC = () => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"16\"\n      height=\"16\"\n      fill=\"currentColor\"\n      viewBox=\"0 0 16 16\"\n    >\n      <path\n        fillRule=\"evenodd\"\n        d=\"M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z\"\n      />\n    </svg>\n  );\n};\n","import React, { FC, useCallback, useMemo, useRef } from 'react';\nimport { usePointerDragSimple } from 'react-use-pointer-drag';\n\nimport { useVarUIValue } from './common/VarUIContext';\nimport { IVarBaseInputProps, VarBase } from './VarBase';\n\nexport type IVarXYValue = [number, number];\n\nexport interface IVarXYProps extends IVarBaseInputProps<IVarXYValue> {\n  /**\n   * Minimum value.\n   */\n  min?: IVarXYValue;\n\n  /**\n   * Maximum value.\n   */\n  max?: IVarXYValue;\n\n  /**\n   * Step.\n   */\n  step?: IVarXYValue;\n}\n\nfunction roundValue(\n  value: IVarXYValue,\n  min: IVarXYValue,\n  max: IVarXYValue,\n  step: IVarXYValue\n): IVarXYValue {\n  const result: IVarXYValue = [0, 0];\n\n  if (!value || !Array.isArray(value) || value.length < 2) {\n    return result;\n  }\n\n  for (let i = 0; i < step.length; i++) {\n    const decimalPlaces = step[i].toString().split('.')[1]?.length || 0;\n    result[i] = Math.round(value[i] / step[i]) * step[i];\n    result[i] = Math.max(min[i], result[i]);\n    result[i] = Math.min(max[i], result[i]);\n\n    result[i] = parseFloat(result[i].toFixed(decimalPlaces));\n  }\n\n  return result;\n}\n\nfunction percentValue(\n  value: IVarXYValue,\n  min: IVarXYValue,\n  max: IVarXYValue\n): IVarXYValue {\n  if (!value) {\n    return [50, 50];\n  }\n\n  const result: IVarXYValue = [0, 0];\n\n  for (let i = 0; i < value.length; i++) {\n    result[i] = ((value[i] - min[i]) / (max[i] - min[i])) * 100;\n  }\n\n  return result;\n}\n\n/**\n * XY offset picker. Accepts and provides an array in form of [x, y].\n */\nexport const VarXY: FC<IVarXYProps> = ({\n  label,\n  path,\n  value,\n  onChange,\n  disabled,\n  className,\n  defaultValue = [0, 0],\n  min = [-1.0, -1.0],\n  max = [1.0, 1.0],\n  step = [0.01, 0.01]\n}) => {\n  const sliderRef = useRef<HTMLDivElement>(null);\n  const [currentValue, setCurrentValue] = useVarUIValue(path, value, onChange);\n  const rounded = useMemo(() => roundValue(currentValue, min, max, step), [\n    currentValue,\n    min,\n    max,\n    step\n  ]);\n  const percent = useMemo(() => percentValue(rounded, min, max), [\n    rounded,\n    min,\n    max\n  ]);\n\n  const updatePosition = useCallback(\n    (x: number, y: number) => {\n      if (!sliderRef.current) {\n        return;\n      }\n\n      const div = sliderRef.current;\n      const rect = div.getBoundingClientRect();\n\n      const percentX = (x - rect.left) / rect.width;\n      const percentY = (y - rect.top) / rect.height;\n\n      const value = roundValue(\n        [\n          min[0] + (max[0] - min[0]) * percentX,\n          min[1] + (max[1] - min[1]) * percentY\n        ],\n        min,\n        max,\n        step\n      );\n      setCurrentValue(value);\n    },\n    [setCurrentValue, min, max, step]\n  );\n\n  const { events } = usePointerDragSimple(updatePosition);\n\n  const reset = useCallback(() => {\n    if (typeof defaultValue !== 'undefined') {\n      setCurrentValue(defaultValue);\n    }\n  }, [defaultValue, setCurrentValue]);\n\n  return (\n    <VarBase label={label} disabled={disabled} className={className}>\n      <span className=\"react-var-ui-xy-value\">\n        {rounded[0]}, {rounded[1]}\n      </span>\n      <div className=\"react-var-ui-xy\">\n        <div\n          className=\"react-var-ui-xy-space\"\n          ref={sliderRef}\n          onClick={e => updatePosition(e.clientX, e.clientY)}\n          onDoubleClick={reset}\n          {...events}\n        >\n          <div\n            className=\"react-var-ui-xy-control\"\n            style={{ top: percent[1] + '%', left: percent[0] + '%' }}\n          ></div>\n        </div>\n      </div>\n    </VarBase>\n  );\n};\n","import React, { FC } from 'react';\n\nexport const IconImageSelect: FC = () => {\n  return (\n    <svg\n      width=\"34\"\n      height=\"34\"\n      viewBox=\"0 0 34 34\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        opacity=\"0.4\"\n        d=\"M16.256 11V16.232H11V17.864H16.256V23.12H17.888V17.864H23.12V16.232H17.888V11H16.256Z\"\n        fill=\"#8D92A2\"\n      />\n      <path\n        d=\"M6 0.5H28C31.0376 0.5 33.5 2.96243 33.5 6V28C33.5 31.0376 31.0376 33.5 28 33.5H6C2.96243 33.5 0.5 31.0376 0.5 28V6C0.5 2.96243 2.96243 0.5 6 0.5Z\"\n        stroke=\"#515151\"\n      />\n    </svg>\n  );\n};\n","import React, { FC } from 'react';\n\nexport const IconDelete: FC = () => {\n  return (\n    <svg\n      width=\"20\"\n      height=\"20\"\n      viewBox=\"0 0 20 20\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <g opacity=\"0.4\">\n        <path\n          d=\"M14.5851 6.48999V15.51H5.56006V6.48999H14.5851ZM15.5851 4.48999H4.56006C4.29484 4.48999 4.04049 4.59535 3.85295 4.78288C3.66542 4.97042 3.56006 5.22477 3.56006 5.48999V16.51C3.56006 16.6413 3.58592 16.7714 3.63618 16.8927C3.68643 17.014 3.76009 17.1242 3.85295 17.2171C3.94581 17.31 4.05605 17.3836 4.17737 17.4339C4.2987 17.4841 4.42874 17.51 4.56006 17.51H15.5851C15.7164 17.51 15.8464 17.4841 15.9677 17.4339C16.0891 17.3836 16.1993 17.31 16.2922 17.2171C16.385 17.1242 16.4587 17.014 16.5089 16.8927C16.5592 16.7714 16.5851 16.6413 16.5851 16.51V5.48999C16.5851 5.22477 16.4797 4.97042 16.2922 4.78288C16.1046 4.59535 15.8503 4.48999 15.5851 4.48999V4.48999Z\"\n          fill=\"#F5F8FF\"\n        />\n        <path\n          d=\"M17.4899 4.50496H2.51494C2.24641 4.50496 1.98888 4.61163 1.799 4.80151C1.60912 4.99139 1.50244 5.24893 1.50244 5.51746C1.50244 5.78599 1.60912 6.04352 1.799 6.23341C1.98888 6.42329 2.24641 6.52996 2.51494 6.52996H17.4899C17.7585 6.52996 18.016 6.42329 18.2059 6.23341C18.3958 6.04352 18.5024 5.78599 18.5024 5.51746C18.5024 5.24893 18.3958 4.99139 18.2059 4.80151C18.016 4.61163 17.7585 4.50496 17.4899 4.50496V4.50496ZM12.5149 1.52496H7.58494C7.33518 1.54274 7.10144 1.65451 6.93079 1.83774C6.76013 2.02098 6.66525 2.26207 6.66525 2.51246C6.66525 2.76285 6.76013 3.00395 6.93079 3.18718C7.10144 3.37041 7.33518 3.48218 7.58494 3.49996H12.5099C12.6455 3.50961 12.7817 3.49124 12.9098 3.44599C13.038 3.40074 13.1555 3.32957 13.255 3.23693C13.3544 3.14429 13.4338 3.03215 13.488 2.90751C13.5423 2.78287 13.5703 2.64839 13.5703 2.51246C13.5703 2.37653 13.5423 2.24205 13.488 2.11741C13.4338 1.99277 13.3544 1.88064 13.255 1.78799C13.1555 1.69535 13.038 1.62419 12.9098 1.57893C12.7817 1.53368 12.6455 1.51531 12.5099 1.52496H12.5149Z\"\n          fill=\"#F5F8FF\"\n        />\n        <path\n          d=\"M8.56006 13.5C8.29525 13.4987 8.04166 13.3929 7.8544 13.2057C7.66715 13.0184 7.56137 12.7648 7.56006 12.5V9.5C7.56137 9.23519 7.66715 8.9816 7.8544 8.79435C8.04166 8.60709 8.29525 8.50131 8.56006 8.5C8.82487 8.50131 9.07846 8.60709 9.26571 8.79435C9.45297 8.9816 9.55874 9.23519 9.56006 9.5V12.5C9.55874 12.7648 9.45297 13.0184 9.26571 13.2057C9.07846 13.3929 8.82487 13.4987 8.56006 13.5V13.5ZM11.5601 13.5C11.2952 13.4987 11.0417 13.3929 10.8544 13.2057C10.6672 13.0184 10.5614 12.7648 10.5601 12.5V9.5C10.5614 9.23519 10.6672 8.9816 10.8544 8.79435C11.0417 8.60709 11.2952 8.50131 11.5601 8.5C11.8249 8.50131 12.0785 8.60709 12.2657 8.79435C12.453 8.9816 12.5587 9.23519 12.5601 9.5V12.5C12.5587 12.7648 12.453 13.0184 12.2657 13.2057C12.0785 13.3929 11.8249 13.4987 11.5601 13.5V13.5Z\"\n          fill=\"#F5F8FF\"\n        />\n      </g>\n    </svg>\n  );\n};\n","import React, { FC } from 'react';\n\nexport const IconAdd: FC = () => {\n  return (\n    <svg\n      width=\"22\"\n      height=\"22\"\n      viewBox=\"0 0 22 22\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <rect x=\"0.5\" y=\"0.5\" width=\"21\" height=\"21\" rx=\"3.5\" stroke=\"#515151\" />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M11.5455 10.4545V5H9.90909V10.4545H5V12.0909H9.90909V17H11.5455V12.0909H17V10.4545H11.5455Z\"\n        fill=\"#515151\"\n      />\n    </svg>\n  );\n};\n","import React, { FC, useCallback, useState, useEffect } from 'react';\n\nimport { IVarBaseProps, VarBase } from './VarBase';\nimport { IconAdd } from './icons/IconAdd';\n\nexport interface IVarAddProps extends IVarBaseProps {\n  /**\n   * Called when the add button is clicked.\n   */\n  didClick?: () => void;\n}\n\n/**\n * Button component. Only provides a onClick property.\n */\nexport const VarAdd: FC<IVarAddProps> = ({\n  label,\n  didClick,\n  disabled,\n  className,\n  children,\n}) => {\n  const [show, setShow] = useState(false);\n\n  const handleCloseClick = useCallback(\n    (event: MouseEvent) => {\n      const popup = (event.target as Element)?.closest(\n        '.react-var-ui-add-popover'\n      );\n      const has_picker =\n        document.getElementsByClassName('react-var-ui-add-popover').length != 0;\n      if (has_picker && show && popup == null) {\n        setShow(false);\n      }\n    },\n    [show, setShow]\n  );\n\n  useEffect(() => {\n    if (show) {\n      window.addEventListener('click', handleCloseClick);\n    } else {\n      window.removeEventListener('click', handleCloseClick);\n    }\n    return () => window.removeEventListener('click', handleCloseClick);\n  }, [show]);\n\n  const toggle = useCallback(() => {\n    setShow(show => !show);\n  }, [setShow]);\n\n  return (\n    <VarBase label={label} disabled={disabled} className={className}>\n      <div className=\"react-var-ui-add\">\n        <div className=\"react-var-ui-add-wrapper\">\n          <div\n            onClick={() => {\n              toggle();\n              didClick?.();\n            }}\n          >\n            <IconAdd></IconAdd>\n          </div>\n          {show ? (\n            <div className=\"react-var-ui-add-popover\">{children}</div>\n          ) : null}\n        </div>\n      </div>\n    </VarBase>\n  );\n};\n","import React, { FC, ReactNode } from 'react';\n\nimport { IVarBaseProps, VarBase } from './VarBase';\n\nexport interface IVarButtonProps extends IVarBaseProps {\n  /**\n   * Called when the button is clicked.\n   */\n  onClick?: () => void;\n\n  /**\n   * Text for the button.\n   */\n  buttonLabel: ReactNode;\n\n  /**\n   * Should the component be disabled.\n   */\n  disabled?: boolean;\n}\n\n/**\n * Button component. Only provides a onClick property.\n */\nexport const VarButton: FC<IVarButtonProps> = ({\n  label,\n  onClick,\n  buttonLabel,\n  disabled,\n  className\n}) => {\n  return (\n    <VarBase label={label} disabled={disabled} className={className}>\n      <span className=\"react-var-ui-button\">\n        <button onClick={() => onClick?.()} disabled={disabled}>\n          {buttonLabel}\n        </button>\n      </span>\n    </VarBase>\n  );\n};\n","import React, { FC, ReactNode } from 'react';\n\nexport interface IVarCategoryProps {\n  /**\n   * Category label.\n   */\n  label: ReactNode;\n\n  /**\n   * Additional class names on the wrapping div element.\n   */\n  className?: string;\n\n  /**\n   * 是否在前面显示分隔符\n   */\n  showDash?: boolean;\n}\n\n/**\n * Category component for grouping inputs.\n */\nexport const VarCategory: FC<IVarCategoryProps> = ({\n  label,\n  className,\n  showDash,\n  children\n}) => {\n  return (\n    <div className={'react-var-ui-category ' + (className ? className : '')}>\n      <div className={'react-var-ui-category-title ' + (showDash ? 'react-var-ui-category-title-dash' : '' )}>{label}</div>\n      {!!children && <div>{children}</div>}\n    </div>\n  );\n};\n","import React, { FC, useCallback, useState, useEffect } from 'react';\nimport { RGBColor, SketchPicker } from 'react-color';\nimport tinycolor from 'tinycolor2';\n\nimport { useVarUIValue } from './common/VarUIContext';\nimport { IVarBaseInputProps, VarBase } from './VarBase';\n\nexport interface IVarColorProps extends IVarBaseInputProps<RGBColor> {\n  /**\n   * Should allow picking alpha values?\n   * If true, the result hex code will contain extra two characters representing the alpha value, from 00 to FF.\n   */\n  alpha?: boolean;\n}\n\n/**\n * Color picker component. Returns and accepts values in form of hex color strings.\n */\nexport const VarColor: FC<IVarColorProps> = ({\n  label,\n  path,\n  value,\n  onChange,\n  disabled,\n  className,\n}) => {\n  const [currentValue, setCurrentValue] = useVarUIValue(path, value, onChange);\n\n  const [show, setShow] = useState(false);\n\n  const handleCloseClick = useCallback(\n    (event: MouseEvent) => {\n      const popup = (event.target as Element)?.closest('.sketch-picker');\n      const has_picker =\n        document.getElementsByClassName('sketch-picker').length != 0;\n      if (has_picker && show && popup == null) {\n        setShow(false);\n      }\n    },\n    [show, setShow]\n  );\n\n  useEffect(() => {\n    if (show) {\n      window.addEventListener('click', handleCloseClick);\n    } else {\n      window.removeEventListener('click', handleCloseClick);\n    }\n    return () => window.removeEventListener('click', handleCloseClick);\n  }, [show]);\n\n  const toggle = useCallback(() => {\n    setShow(show => !show);\n  }, [setShow]);\n\n  // const close = useCallback(() => {\n  //   setShow(false);\n  // }, [setShow]);\n\n  return (\n    <VarBase label={label} disabled={disabled} className={className}>\n      <span>\n        <span className=\"react-var-ui-color-value\">\n          {tinycolor(currentValue).toHexString()}\n        </span>\n        <div className=\"react-var-ui-color\">\n          <div className=\"react-var-ui-color-swatch\" onClick={toggle}>\n            <div\n              className=\"react-var-ui-color-color\"\n              title=\"Color preview\"\n              style={\n                currentValue\n                  ? {\n                      background:\n                        'rgb(' +\n                        currentValue.r +\n                        ',' +\n                        currentValue.g +\n                        ',' +\n                        currentValue.b +\n                        ')',\n                    }\n                  : {}\n              }\n            />\n          </div>\n          {show ? (\n            <div className=\"react-var-ui-color-popover\">\n              <SketchPicker\n                color={currentValue}\n                onChange={result => {\n                  setCurrentValue(result.rgb);\n                }}\n                disableAlpha={true}\n              />\n            </div>\n          ) : null}\n        </div>\n      </span>\n    </VarBase>\n  );\n};\n","import React, { FC, ReactText } from 'react';\n\nimport { useVarUIValue } from './common/VarUIContext';\nimport { IVarBaseProps, VarBase } from './VarBase';\n\nexport interface IVarDisplayProps extends IVarBaseProps {\n  /**\n   * Variable path in the data object.\n   */\n  path?: string;\n\n  /**\n   * Current value (only used if context and path aren't available).\n   * In most cases you aren't going to need this.\n   */\n  value?: ReactText;\n}\n\n/**\n * A simple component that displays a string or a numeric value.\n */\nexport const VarDisplay: FC<IVarDisplayProps> = ({\n  label,\n  path,\n  value,\n  disabled,\n  className\n}) => {\n  const [currentValue] = useVarUIValue(path, value);\n\n  return (\n    <VarBase label={label} disabled={disabled} className={className}>\n      <span>{currentValue}</span>\n    </VarBase>\n  );\n};\n","import React, { FC } from 'react';\n\nimport { IVarBaseProps, VarBase } from './VarBase';\nimport { IconDelete } from './icons/IconDelete';\n\nexport interface IVarGroupProps extends IVarBaseProps {\n  /**\n   * 删除\n   */\n  onDelete?: () => void;\n}\n\n/**\n * Category component for grouping inputs.\n */\nexport const VarGroup: FC<IVarGroupProps> = ({\n  label,\n  disabled,\n  className,\n  children,\n  onDelete,\n}) => {\n  return (\n    <div>\n      <VarBase label={label} disabled={disabled} className={className}>\n        <div className=\"react-var-ui-group-wrapper\">\n          <div className=\"react-var-ui-group-wrapper-icon\">\n            <div\n              onClick={() => {\n                onDelete?.();\n              }}\n            >\n              <IconDelete></IconDelete>\n            </div>\n          </div>\n        </div>\n      </VarBase>\n      {!!children && <div className=\"react-var-ui-group\">{children}</div>}\n    </div>\n  );\n};\n","import React, { FC } from 'react';\n\n/**\n * Group item component inside group.\n */\nexport const VarGroupItem: FC = ({\n  children,\n}) => {\n  return (\n    <div className=\"react-var-ui-group-item\">\n      {children}\n    </div>\n  );\n};\n","import React, { FC, useCallback, useRef } from 'react';\nimport { IconImageSelect } from './icons/IconImageSelect';\nimport { IconDelete } from './icons/IconDelete';\n\nimport { useVarUIValue } from './common/VarUIContext';\nimport { IVarBaseInputProps, VarBase } from './VarBase';\n\nexport interface IVarImageProps\n  extends IVarBaseInputProps<{\n    src: HTMLImageElement | string | null;\n    type?: string;\n    extension?: string;\n  }> {\n  path?: string;\n  value?: {\n    src: HTMLImageElement | string | null;\n    type?: string;\n    extension?: string;\n  };\n}\n\n/**\n * A simple component that displays a string or a numeric value.\n */\nexport const VarImage: FC<IVarImageProps> = ({\n  label,\n  disabled,\n  path,\n  value,\n  onChange,\n  className,\n}) => {\n  const [currentValue, setCurrentValue] = useVarUIValue(path, value, onChange);\n  const inputRef = useRef<HTMLInputElement | null>(null);\n  const deleteAction = useCallback(() => {\n    setCurrentValue({ src: null });\n    if (inputRef && inputRef.current) {\n      inputRef.current.value = '';\n    }\n  }, [setCurrentValue, inputRef]);\n\n  const onFileChange = useCallback(\n    event => {\n      const files = (event?.target as HTMLInputElement).files;\n      if (!files || !files.length) return;\n      const file = files[0];\n      const url = URL.createObjectURL(file);\n      const extension = file.name.split('.')?.pop()?.toLowerCase();\n      setCurrentValue({ src: url, type: file.type, extension: extension });\n    },\n    [setCurrentValue]\n  );\n\n  return (\n    <VarBase label={label} disabled={disabled} className={className}>\n      <div className=\"react-var-ui-image\">\n        <div\n          className=\"react-var-ui-image-wrapper\"\n          style={\n            currentValue == null || currentValue.src == null\n              ? { border: 'none' }\n              : {}\n          }\n        >\n          {currentValue == null || currentValue.src == null ? (\n            <IconImageSelect></IconImageSelect>\n          ) : (\n            <img\n              className=\"react-var-ui-image-wrapper-preview\"\n              src={\n                currentValue.src instanceof HTMLImageElement\n                  ? currentValue.src.src\n                  : currentValue.src\n              }\n              alt=\"preview\"\n            />\n          )}\n          <input ref={inputRef} type=\"file\" id=\"\" onChange={onFileChange} />\n        </div>\n        {currentValue == null || currentValue.src == null ? null : (\n          <div className=\"react-var-ui-image-delete\" onClick={deleteAction}>\n            <IconDelete></IconDelete>\n          </div>\n        )}\n      </div>\n    </VarBase>\n  );\n};\n","import React, { FC, useCallback, useState, useRef, useEffect } from 'react';\n\nimport { useVarUIValue } from './common/VarUIContext';\nimport { roundValue } from './common/roundValue';\nimport { IVarBaseInputProps, VarBase } from './VarBase';\nimport { IconDown } from './icons/IconDown';\nimport { IconUp } from './icons/IconUp';\n\nexport interface IVarNumberProps extends IVarBaseInputProps<number> {\n  /**\n   * Minimum value.\n   */\n  min?: number;\n\n  /**\n   * Maximum value.\n   */\n  max?: number;\n\n  /**\n   * Step.\n   */\n  step?: number;\n\n  /**\n   * Should the end result be rounded to an integer value.\n   */\n  integer?: boolean;\n\n  /**\n   * If true will display buttons that increase and decrease the value by step.\n   * Step must be set.\n   */\n  showButtons?: boolean;\n}\n\n/**\n * Integer/float number component. Accepts and provides numbers.\n */\nexport const VarNumber: FC<IVarNumberProps> = ({\n  label,\n  path,\n  value,\n  onChange,\n  min,\n  max,\n  step = 1,\n  integer,\n  showButtons,\n  disabled,\n  className,\n}) => {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [currentValue, setCurrentValue] = useVarUIValue(path, value, onChange);\n  const [display, setDisplay] = useState(0);\n\n  useEffect(() => {\n    inputRef.current?.addEventListener('blur', handleInputBlur);\n    return () => inputRef.current?.removeEventListener('blur', handleInputBlur);\n  }, []);\n\n  useEffect(() => {\n    if (inputRef.current) {\n      const value = roundValue(\n        currentValue,\n        min,\n        max,\n        step,\n        !!integer\n      ).toString();\n      inputRef.current.value = value;\n    }\n  }, [display]);\n\n  const handleInputChange = useCallback(\n    e => {\n      setCurrentValue(\n        roundValue(parseFloat(e.target.value), min, max, step, !!integer)\n      );\n    },\n    [setCurrentValue]\n  );\n\n  const handleInputBlur = useCallback(\n    e => {\n      setCurrentValue(roundValue(parseFloat(e.target.value), min, max, step, !!integer));\n      setDisplay(parseFloat(e.target.value));\n    },\n    [setCurrentValue, setDisplay]\n  );\n\n  const increaseValue = useCallback(() => {\n    setCurrentValue(roundValue(currentValue + (step ?? 1), min, max, step, !!integer));\n    setDisplay(currentValue + (step ?? 1));\n  }, [currentValue, setCurrentValue, integer, min, max, step]);\n\n  const decreaseValue = useCallback(() => {\n    setCurrentValue(roundValue(currentValue - (step ?? 1), min, max, step, !!integer));\n    setDisplay(currentValue - (step ?? 1));\n  }, [currentValue, setCurrentValue, integer, min, max, step]);\n\n  return (\n    <VarBase label={label} disabled={disabled} className={className}>\n      <div className=\"react-var-ui-number\">\n        <input\n          className=\"react-var-ui-number-input\"\n          ref={inputRef}\n          type=\"number\"\n          min={min}\n          max={max}\n          step={step}\n          onChange={handleInputChange}\n        />\n        {showButtons && (\n          <>\n            <button title=\"Increase\" onClick={increaseValue}>\n              <IconUp />\n            </button>\n            <button title=\"Decrease\" onClick={decreaseValue}>\n              <IconDown />\n            </button>\n          </>\n        )}\n      </div>\n    </VarBase>\n  );\n};\n","import React, { FC, ReactText, useMemo } from 'react';\n\nimport { useVarUIValue } from './common/VarUIContext';\nimport { IVarBaseInputProps, VarBase } from './VarBase';\n\nexport interface IVarSelectOption {\n  /**\n   * Key for the option. Also used as value if `value` is not specified.\n   */\n  key: ReactText;\n\n  /**\n   * Option label.\n   */\n  label: string;\n\n  /**\n   * Option value. Key will be used if not specified.\n   * Note: Will be serialized to JSON and deserialized when selected.\n   */\n  value?: any;\n}\n\nexport interface IVarSelectProps extends IVarBaseInputProps<any> {\n  /**\n   * Options to be displayed.\n   */\n  options: IVarSelectOption[];\n}\n\n/**\n * Select component. Returns and accepts either `value` from option object or `key` when `value` is not provided.\n */\nexport const VarSelect: FC<IVarSelectProps> = ({\n  label,\n  path,\n  value,\n  onChange,\n  options,\n  disabled,\n  className,\n}) => {\n  const [currentValue, setCurrentValue] = useVarUIValue(path, value, onChange);\n\n  const serializedCurrentValue = useMemo(() => JSON.stringify(currentValue), [\n    currentValue,\n  ]);\n\n  return (\n    <VarBase label={label} disabled={disabled} className={className}>\n      <div className=\"react-var-ui-select\">\n        <select\n          onChange={e => setCurrentValue(JSON.parse(e.target.value))}\n          value={serializedCurrentValue}\n          title=\"Select options\"\n        >\n          {options.map(option => {\n            const serializedValue = JSON.stringify(option.value ?? option.key);\n\n            return (\n              <option key={option.key} value={serializedValue}>\n                {option.label}\n              </option>\n            );\n          })}\n        </select>\n      </div>\n    </VarBase>\n  );\n};\n","import React, {\n  FC,\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n  useEffect,\n} from 'react';\nimport { usePointerDragSimple } from 'react-use-pointer-drag';\n\nimport { useVarUIValue } from './common/VarUIContext';\nimport { roundValue } from './common/roundValue';\nimport { IVarBaseInputProps, VarBase } from './VarBase';\nimport { IconDown } from './icons/IconDown';\nimport { IconUp } from './icons/IconUp';\n\nexport interface IVarSliderProps extends IVarBaseInputProps<number> {\n  /**\n   * Minimum value.\n   */\n  min: number;\n\n  /**\n   * Maximum value.\n   */\n  max: number;\n\n  /**\n   * Step.\n   */\n  step: number;\n\n  /**\n   * Should the end result be rounded to an integer value.\n   */\n  integer?: boolean;\n\n  /**\n   * If true will display an editable input, otherwise shows a read only value.\n   */\n  showInput?: boolean;\n\n  /**\n   * If true will display buttons that increase and decrease the value by step.\n   */\n  showButtons?: boolean;\n}\n\n/**\n * Integer/float slider component. Accepts and provides numbers.\n */\nexport const VarSlider: FC<IVarSliderProps> = ({\n  label,\n  path,\n  value,\n  onChange,\n  min,\n  max,\n  step,\n  integer,\n  defaultValue,\n  showInput,\n  showButtons,\n  disabled,\n  className,\n}) => {\n  const sliderRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [currentValue, setCurrentValue] = useVarUIValue(path, value, onChange);\n  const [display, setDisplay] = useState(0);\n\n  useEffect(() => {\n    inputRef.current?.addEventListener('blur', handleInputBlur);\n    return () => inputRef.current?.removeEventListener('blur', handleInputBlur);\n  }, []);\n\n  useEffect(() => {\n    if (inputRef.current) {\n      const value = roundValue(\n        currentValue,\n        min,\n        max,\n        step,\n        !!integer\n      ).toString();\n      inputRef.current.value = value;\n    }\n  }, [display]);\n\n  const handleInputChange = useCallback(\n    e => {\n      setCurrentValue(\n        roundValue(parseFloat(e.target.value), min, max, step, !!integer)\n      );\n    },\n    [setCurrentValue]\n  );\n\n  const handleInputBlur = useCallback(\n    e => {\n      const newValue = parseFloat(e.target.value);\n      setCurrentValue(roundValue(newValue, min, max, step, !!integer));\n      setDisplay(newValue);\n    },\n    [setCurrentValue, setDisplay]\n  );\n\n  const rounded = useMemo(\n    () => roundValue(currentValue, min, max, step, !!integer),\n    [currentValue, min, max, step, integer]\n  );\n  const percent = useMemo(() => ((rounded - min) / (max - min)) * 100, [\n    rounded,\n    min,\n    max,\n  ]);\n\n  const updatePosition = useCallback(\n    (x: number) => {\n      if (!sliderRef.current) {\n        return;\n      }\n\n      const div = sliderRef.current;\n      const rect = div.getBoundingClientRect();\n      const percent = (x - rect.left) / rect.width;\n      const value = roundValue(\n        min + (max - min) * percent,\n        min,\n        max,\n        step,\n        !!integer\n      );\n      setCurrentValue(value);\n      setDisplay(value);\n    },\n    [setCurrentValue, setDisplay, integer, min, max, step]\n  );\n\n  const increaseValue = useCallback(() => {\n    const newValue = currentValue + (step ?? 1);\n    setCurrentValue(roundValue(newValue, min, max, step, !!integer));\n  }, [currentValue, setCurrentValue, integer, min, max, step]);\n\n  const decreaseValue = useCallback(() => {\n    const newValue = currentValue - (step ?? 1);\n    setCurrentValue(roundValue(newValue, min, max, step, !!integer));\n  }, [currentValue, setCurrentValue, integer, min, max, step]);\n\n  const { events } = usePointerDragSimple(updatePosition);\n\n  // useEffect(() => {\n  //   sliderRef.current?.addEventListener('wheel', e => e.preventDefault(), { passive: false });\n  // }, []);\n\n  return (\n    <VarBase label={label} disabled={disabled} className={className}>\n      <div className=\"react-var-ui-slider\">\n        <div\n          className=\"react-var-ui-slider-track\"\n          ref={sliderRef}\n          onClick={e => updatePosition(e.clientX)}\n          onDoubleClick={() =>\n            typeof defaultValue !== 'undefined' && setCurrentValue(defaultValue)\n          }\n          title=\"Slider\"\n          {...events}\n        >\n          <div\n            className=\"react-var-ui-slider-content\"\n            style={{ width: percent + '%' }}\n          ></div>\n        </div>\n        {showInput ? (\n          <input\n            className=\"react-var-ui-slider-input\"\n            type=\"number\"\n            ref={inputRef}\n            min={min}\n            max={max}\n            step={step}\n            onChange={handleInputChange}\n          />\n        ) : (\n          <span>{rounded.toString()}</span>\n        )}\n        {showButtons && (\n          <>\n            <button title=\"Increase\" onClick={increaseValue}>\n              <IconUp />\n            </button>\n            <button title=\"Decrease\" onClick={decreaseValue}>\n              <IconDown />\n            </button>\n          </>\n        )}\n      </div>\n    </VarBase>\n  );\n};\n","import React, { CSSProperties, FC, useMemo } from 'react';\n\nimport { useVarUIValue } from './common/VarUIContext';\nimport { IVarBaseInputProps, VarBase } from './VarBase';\n\nexport interface IVarStringProps extends IVarBaseInputProps<string> {\n  /**\n   * Maximum length of the text.\n   */\n  maxLength?: number;\n\n  /**\n   * Should the field be a textarea?\n   */\n  multiline?: boolean;\n\n  /**\n   * Should the text field auto expand?\n   * Only works with multiline instances.\n   */\n  autoexpand?: boolean;\n}\n\n/**\n * String input component. Accepts and provides a string value.\n */\nexport const VarString: FC<IVarStringProps> = ({\n  label,\n  path,\n  value,\n  onChange,\n  maxLength,\n  multiline,\n  autoexpand,\n  disabled,\n  className,\n}) => {\n  const [currentValue, setCurrentValue] = useVarUIValue(path, value, onChange);\n\n  const autoexpandOnInput = (event: React.FormEvent<HTMLTextAreaElement>) => {\n    const textarea = event.currentTarget;\n    textarea.style.height = '0';\n    textarea.style.height = `${textarea.scrollHeight}px`;\n  };\n\n  const textareaStyle: CSSProperties | undefined = useMemo(\n    () => (autoexpand ? { overflow: 'hidden', resize: 'none' } : undefined),\n    [autoexpand]\n  );\n\n  return (\n    <VarBase label={label} disabled={disabled} className={className}>\n      {multiline ? (\n        <textarea\n          className=\"react-var-ui-string-multiline\"\n          value={currentValue}\n          onChange={e => setCurrentValue(e.target.value)}\n          onInput={autoexpand ? autoexpandOnInput : undefined}\n          style={textareaStyle}\n        />\n      ) : (\n        <span className=\"react-var-ui-string\">\n          <input\n            type=\"text\"\n            maxLength={maxLength}\n            value={currentValue}\n            onChange={e => setCurrentValue(e.target.value)}\n          />\n        </span>\n      )}\n    </VarBase>\n  );\n};\n","import React, { FC } from 'react';\n\nimport { useVarUIValue } from './common/VarUIContext';\nimport { IVarBaseInputProps, VarBase } from './VarBase';\n\nexport interface IVarToggleProps extends IVarBaseInputProps<boolean> {}\n\n/**\n * Checkbox/toggle component. Accepts and returns a boolean (true/false).\n */\nexport const VarToggle: FC<IVarToggleProps> = ({\n  label,\n  path,\n  value,\n  onChange,\n  disabled,\n  className\n}) => {\n  const [currentValue, setCurrentValue] = useVarUIValue(path, value, onChange);\n\n  return (\n    <VarBase label={label} disabled={disabled} className={className}>\n      <span>\n        <label className=\"react-var-ui-toggle\" title=\"Toggle\">\n          <input\n            type=\"checkbox\"\n            checked={currentValue || false}\n            onChange={e => setCurrentValue(e.target.checked)}\n          />\n          <span className=\"react-var-ui-toggle-helper\"></span>\n        </label>\n      </span>\n    </VarBase>\n  );\n};\n","import React, { FC, ReactNode, useMemo, useCallback } from 'react';\nimport cloneDeep from 'lodash.clonedeep';\nimport set from 'lodash.set';\nimport result from 'lodash.result';\n\nimport { VarUIObject, VarUIContext } from './common/VarUIContext';\n\nexport interface IVarUIProps {\n  /**\n   * A JavaScript object or array to be mutated by the input components.\n   */\n  values: VarUIObject;\n\n  /**\n   * The function to be called whenever an update is available.\n   */\n  updateValues: (values: VarUIObject) => void;\n\n  /**\n   * Additional class names for the wrapper object.\n   */\n  className?: string;\n\n  /**\n   * Input components (or any other children).\n   */\n  children?: ReactNode;\n}\n\n/**\n * This is the main component which provides a Context for other components.\n * It is not required to use this component - other components accept\n * `onChange` and `value` properties which provide a similar functionality.\n */\nexport const VarUI: FC<IVarUIProps> = ({\n  values,\n  updateValues,\n  className,\n  children\n}) => {\n  const getValue = useCallback(\n    (path?: string) => (path ? result(values, path) : undefined),\n    [values]\n  );\n\n  const setValue = useCallback(\n    (path: string, value: any) => {\n      updateValues(set(cloneDeep(values), path, value));\n    },\n    [values, updateValues]\n  );\n\n  const contextValue = useMemo(() => ({ values, getValue, setValue }), [\n    values,\n    getValue,\n    setValue\n  ]);\n\n  return (\n    <VarUIContext.Provider value={contextValue}>\n      <div className={'react-var-ui ' + (className ? className : '')}>\n        {children}\n      </div>\n    </VarUIContext.Provider>\n  );\n};\n","import React, {\n  FC,\n  useMemo,\n  useCallback,\n  useState,\n  useRef,\n  useEffect,\n} from 'react';\n\nimport { useVarUIValue } from './common/VarUIContext';\nimport { roundValue } from './common/roundValue';\nimport { IVarBaseInputProps, VarBase } from './VarBase';\n\nexport type IVarVector2Value = [number, number];\nexport interface IVarVector2Props extends IVarBaseInputProps<IVarVector2Value> {\n  /**\n   * Minimum value.\n   */\n  min?: IVarVector2Value;\n\n  /**\n   * Maximum value.\n   */\n  max?: IVarVector2Value;\n\n  /**\n   * Step.\n   */\n  step?: IVarVector2Value;\n\n  /**\n   * Should the end result be rounded to an integer value.\n   */\n  integer?: boolean;\n}\n\n/**\n * Integer/float number component. Accepts and provides numbers.\n */\nexport const VarVector2: FC<IVarVector2Props> = ({\n  label,\n  path,\n  value,\n  onChange,\n  min,\n  max,\n  step = [1, 1],\n  integer,\n  disabled,\n  className,\n}) => {\n  const inputRefX = useRef<HTMLInputElement>(null);\n  const inputRefY = useRef<HTMLInputElement>(null);\n  const [display, setDisplay] = useState([0, 0]);\n  const [currentValue, setCurrentValue] = useVarUIValue(path, value, onChange);\n  const stateRef = React.useRef(currentValue);\n\n  const handleInputChange = useCallback(\n    (e, index) => {\n      const newValue = [...currentValue] as IVarVector2Value;\n      newValue[index] = roundValue(\n        parseFloat(e.target.value),\n        min ? min[index] : min,\n        max ? max[index] : max,\n        step[index],\n        !!integer\n      );\n      stateRef.current = newValue;\n      setCurrentValue(newValue);\n    },\n    [setCurrentValue, currentValue, stateRef]\n  );\n\n  const handleInputBlur = useCallback(\n    (e, index) => {\n      const newValue = JSON.parse(\n        JSON.stringify(stateRef.current)\n      ) as IVarVector2Value;\n      newValue[index] = roundValue(\n        parseFloat(e.target.value),\n        min ? min[index] : min,\n        max ? max[index] : max,\n        step[index],\n        !!integer\n      );\n      stateRef.current = newValue;\n      setCurrentValue(newValue);\n      setDisplay(newValue);\n    },\n    [setCurrentValue, setDisplay, currentValue]\n  );\n\n  const handleInputBlurX = useCallback(\n    e => {\n      handleInputBlur(e, 0);\n    },\n    [handleInputBlur]\n  );\n\n  const handleInputBlurY = useCallback(\n    e => {\n      handleInputBlur(e, 1);\n    },\n    [handleInputBlur]\n  );\n\n\n  useEffect(() => {\n    inputRefX.current?.addEventListener('blur', handleInputBlurX);\n    inputRefY.current?.addEventListener('blur', handleInputBlurY);\n    return () => {\n      inputRefX.current?.removeEventListener('blur', handleInputBlurX);\n      inputRefY.current?.removeEventListener('blur', handleInputBlurY);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (inputRefX.current) {\n      inputRefX.current.value = roundedX.toString();\n    }\n    if (inputRefY.current) {\n      inputRefY.current.value = roundedY.toString();\n    }\n  }, [display]);\n\n  const roundedX = useMemo(\n    () =>\n      roundValue(\n        currentValue[0],\n        min ? min[0] : min,\n        max ? max[0] : max,\n        step[0],\n        !!integer\n      ),\n    [currentValue, min, max, step, integer]\n  );\n\n  const roundedY = useMemo(\n    () =>\n      roundValue(\n        currentValue[1],\n        min ? min[1] : min,\n        max ? max[1] : max,\n        step[1],\n        !!integer\n      ),\n    [currentValue, min, max, step, integer]\n  );\n\n  return (\n    <VarBase label={label} disabled={disabled} className={className}>\n      <div className=\"react-var-ui-vector\">\n        <div className=\"react-var-ui-vector-wrapper\">\n          <span>X</span>\n          <input\n            className=\"react-var-ui-vector-input\"\n            type=\"number\"\n            ref={inputRefX}\n            min={min ? min[0] : min}\n            max={max ? max[0] : max}\n            step={step[0]}\n            onChange={e => handleInputChange(e, 0)}\n          />\n        </div>\n\n        <div className=\"react-var-ui-vector-wrapper\">\n          <span>Y</span>\n          <input\n            className=\"react-var-ui-vector-input\"\n            type=\"number\"\n            ref={inputRefY}\n            min={min ? min[1] : min}\n            max={max ? max[1] : max}\n            step={step[1]}\n            onChange={e => handleInputChange(e, 1)}\n          />\n        </div>\n      </div>\n    </VarBase>\n  );\n};\n","import React, {\n  FC,\n  useMemo,\n  useCallback,\n  useState,\n  useRef,\n  useEffect,\n} from 'react';\n\nimport { useVarUIValue } from './common/VarUIContext';\nimport { roundValue } from './common/roundValue';\nimport { IVarBaseInputProps, VarBase } from './VarBase';\n\nexport type IVarVector3Value = [number, number, number];\nexport interface IVarVector3Props extends IVarBaseInputProps<IVarVector3Value> {\n  /**\n   * Minimum value.\n   */\n  min?: IVarVector3Value;\n\n  /**\n   * Maximum value.\n   */\n  max?: IVarVector3Value;\n\n  /**\n   * Step.\n   */\n  step?: IVarVector3Value;\n\n  /**\n   * Should the end result be rounded to an integer value.\n   */\n  integer?: boolean;\n}\n\n/**\n * Integer/float number component. Accepts and provides numbers.\n */\nexport const VarVector3: FC<IVarVector3Props> = ({\n  label,\n  path,\n  value,\n  onChange,\n  min,\n  max,\n  step = [1, 1, 1],\n  integer,\n  disabled,\n  className,\n}) => {\n  const inputRefX = useRef<HTMLInputElement>(null);\n  const inputRefY = useRef<HTMLInputElement>(null);\n  const inputRefZ = useRef<HTMLInputElement>(null);\n  const [display, setDisplay] = useState([0, 0, 0]);\n  const [currentValue, setCurrentValue] = useVarUIValue(path, value, onChange);\n  const stateRef = React.useRef(currentValue);\n\n  const handleInputChange = useCallback(\n    (e, index) => {\n      const newValue = [...currentValue] as IVarVector3Value;\n      newValue[index] = roundValue(\n        parseFloat(e.target.value),\n        min ? min[index] : min,\n        max ? max[index] : max,\n        step[index],\n        !!integer\n      );\n      stateRef.current = newValue;\n      setCurrentValue(newValue);\n    },\n    [setCurrentValue, currentValue, stateRef]\n  );\n\n  const handleInputBlur = useCallback(\n    (e, index) => {\n      const newValue = JSON.parse(\n        JSON.stringify(stateRef.current)\n      ) as IVarVector3Value;\n      newValue[index] = roundValue(\n        parseFloat(e.target.value),\n        min ? min[index] : min,\n        max ? max[index] : max,\n        step[index],\n        !!integer\n      );\n      stateRef.current = newValue;\n      setCurrentValue(newValue);\n      setDisplay(newValue);\n    },\n    [setCurrentValue, setDisplay, currentValue]\n  );\n\n  const handleInputBlurX = useCallback(\n    e => {\n      handleInputBlur(e, 0);\n    },\n    [handleInputBlur]\n  );\n\n  const handleInputBlurY = useCallback(\n    e => {\n      handleInputBlur(e, 1);\n    },\n    [handleInputBlur]\n  );\n\n  const handleInputBlurZ = useCallback(\n    e => {\n      handleInputBlur(e, 2);\n    },\n    [handleInputBlur]\n  );\n\n  useEffect(() => {\n    inputRefX.current?.addEventListener('blur', handleInputBlurX);\n    inputRefY.current?.addEventListener('blur', handleInputBlurY);\n    inputRefZ.current?.addEventListener('blur', handleInputBlurZ);\n    return () => {\n      inputRefX.current?.removeEventListener('blur', handleInputBlurX);\n      inputRefY.current?.removeEventListener('blur', handleInputBlurY);\n      inputRefZ.current?.removeEventListener('blur', handleInputBlurZ);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (inputRefX.current) {\n      inputRefX.current.value = roundedX.toString();\n    }\n    if (inputRefY.current) {\n      inputRefY.current.value = roundedY.toString();\n    }\n    if (inputRefZ.current) {\n      inputRefZ.current.value = roundedZ.toString();\n    }\n  }, [display]);\n\n  const roundedX = useMemo(\n    () =>\n      roundValue(\n        currentValue[0],\n        min ? min[0] : min,\n        max ? max[0] : max,\n        step[0],\n        !!integer\n      ),\n    [currentValue, min, max, step, integer]\n  );\n\n  const roundedY = useMemo(\n    () =>\n      roundValue(\n        currentValue[1],\n        min ? min[1] : min,\n        max ? max[1] : max,\n        step[1],\n        !!integer\n      ),\n    [currentValue, min, max, step, integer]\n  );\n\n  const roundedZ = useMemo(\n    () =>\n      roundValue(\n        currentValue[2],\n        min ? min[2] : min,\n        max ? max[2] : max,\n        step[2],\n        !!integer\n      ),\n    [currentValue, min, max, step, integer]\n  );\n\n  return (\n    <VarBase label={label} disabled={disabled} className={className}>\n      <div className=\"react-var-ui-vector\">\n        <div className=\"react-var-ui-vector-wrapper\">\n          <span>X</span>\n          <input\n            className=\"react-var-ui-vector-input\"\n            type=\"number\"\n            ref={inputRefX}\n            min={min ? min[0] : min}\n            max={max ? max[0] : max}\n            step={step[0]}\n            onChange={e => handleInputChange(e, 0)}\n          />\n        </div>\n\n        <div className=\"react-var-ui-vector-wrapper\">\n          <span>Y</span>\n          <input\n            className=\"react-var-ui-vector-input\"\n            type=\"number\"\n            ref={inputRefY}\n            min={min ? min[1] : min}\n            max={max ? max[1] : max}\n            step={step[1]}\n            onChange={e => handleInputChange(e, 1)}\n          />\n        </div>\n\n        <div className=\"react-var-ui-vector-wrapper\">\n          <span>Z</span>\n          <input\n            className=\"react-var-ui-vector-input\"\n            type=\"number\"\n            ref={inputRefZ}\n            min={min ? min[2] : min}\n            max={max ? max[2] : max}\n            step={step[2]}\n            onChange={e => handleInputChange(e, 2)}\n          />\n        </div>\n      </div>\n    </VarBase>\n  );\n};\n"],"names":["VarUIContext","createContext","undefined","useVarUIValue","path","fallbackValue","onChange","context","useContext","useMemo","getValue","useCallback","value","setValue","VarBase","label","children","React","className","disabled","PI2","Math","PI","wrap","angle","roundValue","min","max","step","integer","isFinite","decimalPlaces","toString","split","length","round","parseFloat","toFixed","IconDown","xmlns","width","height","fill","viewBox","fillRule","d","IconUp","result","Array","isArray","i","IconImageSelect","opacity","stroke","IconDelete","IconAdd","x","y","rx","clipRule","didClick","useState","show","setShow","handleCloseClick","event","popup","target","_event$target","closest","document","getElementsByClassName","useEffect","window","addEventListener","removeEventListener","toggle","onClick","defaultValue","controlRef","useRef","currentValue","setCurrentValue","degrees","updatePosition","current","rect","getBoundingClientRect","atan2","top","left","events","usePointerDragSimple","e","preventDefault","ref","style","transform","onDoubleClick","onWheel","deltaY","title","buttonLabel","showDash","tinycolor","toHexString","background","r","g","b","SketchPicker","color","rgb","disableAlpha","onDelete","inputRef","deleteAction","src","onFileChange","files","file","url","URL","createObjectURL","extension","name","_file$name$split","pop","_file$name$split$pop","toLowerCase","type","border","HTMLImageElement","alt","id","showButtons","display","setDisplay","handleInputBlur","_inputRef$current2","handleInputChange","increaseValue","decreaseValue","options","serializedCurrentValue","JSON","stringify","parse","map","option","serializedValue","key","showInput","sliderRef","newValue","rounded","percent","clientX","maxLength","multiline","autoexpand","textareaStyle","overflow","resize","onInput","textarea","currentTarget","scrollHeight","checked","values","updateValues","set","cloneDeep","contextValue","Provider","inputRefX","inputRefY","stateRef","index","handleInputBlurX","handleInputBlurY","roundedX","roundedY","inputRefZ","handleInputBlurZ","roundedZ","percentValue","reset","clientY"],"mappings":"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"}